<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Ribs.js Intro</title>

    <style type="text/css">
        @import "jquery.svg.css";

        #mySvg {
            width: 800px;
            height: 600px;
        }
    </style>
	<script type="text/javascript" src="jquery-1.4.2.js"></script>
    <script type="text/javascript" src="jquery.svg.js"></script>
    <script type="text/javascript" src="jquery.svgdom.js"></script>
    <script type="text/javascript" src="jquery.svganim.js"></script>

	<script type="text/javascript">

        $(function () {
            var svg = $('#mySvg').svg({
                    loadURL: "ribs.svg",
                    onLoad: loadDone,
                    settings: {addTo: true}
                }),
                screens = [];

            // Callback after loading external document
            function loadDone(svg, error) {
                console.log(svg.root());

                slides = [];
                $("defs rect", svg.root()).each(function (index, value) {
                    var $value = $(value), slide = {
                        x: $value.attr("x"), y: $value.attr("y"),
                        width: $value.attr("width"), height: $value.attr("height"),
                        sideways: ($value.attr("height") > $value.attr("width"))
                    };
                    slides.push(slide);
                });

                console.log(screens);

                $("#SVGID_4_, #SVGID_5_, #SVGID_6_", svg.root()).remove();

                mainGroup = $("g:first", svg.root());
            }
        });

        var mainGroup, slides = [],
            currentSlideIndex = -1,
            showNextSlide = function () {
                currentSlideIndex = (currentSlideIndex + 1) % slides.length;
                var currentTransformation = mainGroup.attr("transform"),
                    oldTranslate = currentTransformation.match(/translate\(([-\.0-9]*),([-\.0-9]*)\)/),
                    oldTranslateX = oldTranslate ? oldTranslate[1] : 0,
                    oldTranslateY = oldTranslate ? oldTranslate[2] : 0,
                    oldScale = currentTransformation.match(/scale\(([-\.0-9]*),([-\.0-9]*)\)/),
                    oldScaleX = oldScale ? oldScale[1] : 1,
                    oldScaleY = oldScale ? oldScale[2] : 1,
                    slide = slides[currentSlideIndex],
                    translateX = -slide.x + oldTranslateX,
                    translateY = -slide.y + oldTranslateY,
                    scaleX = oldScaleX / (800 / slide.width),
                    scaleY = oldScaleY / (600 / slide.height),
                    transformString = "scale(" + scaleX + " " + scaleY + ") translate(" + translateX + " " + translateY + ")";
                console.log(currentTransformation);
                mainGroup.animate({svgTransform: transformString}, 2000);
            };

	</script>
</head>
<body onclick="showNextSlide()">

<div id="mySvg"></div>

</body>
</html>